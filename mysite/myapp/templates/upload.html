{% extends 'base.html' %}
{% load static %}
{% block content %}

<div id="rec843263554" class="r t-rec t-rec_pt_135 t-rec_pt-res-480_90 t-rec_pb_135 t-rec_pb-res-480_90" style="padding-top:135px;padding-bottom:135px;background-color:#fff;" data-animationappear="off" data-record-type="948" data-bg-color="#fff">
    <div class="t948">
        <div class="t-section__container t-container t-container_flex" style="margin-bottom:80px;">
            <div class="t-col t-col_12">
                <div class="t-section__title t-title t-title_xs t-align_center t-margin_auto" field="btitle">
                    Analysis of X-ray images of the lungs
                </div>
                <div class="t-section__descr t-descr t-descr_xl t-align_center t-margin_auto" field="bdescr">
                    with the help of artificial intelligence
                </div>
            </div>
        </div>
        {% if error %}
    <div style="color: red; border: 1px solid red; padding: 10px; margin-bottom: 20px;">
        <strong>Error:</strong> {{ error }}
    </div>
    {% endif %}
        <div class="t-container">
            <div class="t948__row">
                <div class="t-item t948__col t-col t-col_12">
                    <div class="t948__content">
                        <div class="t948__textwrapper" style="border: 1px solid transparent; background-color: #f2f9fd;">
                            <div class="t948__circle">
                                <div class="t948__number t-name t-name_md">1</div>
                            </div>
                            <div class="t948__title t-name t-name_md" field="li_title__5917094636332">
                                <form action="{% url 'analyze_image' %}" method="POST" enctype="multipart/form-data">
                                    {% csrf_token %}
                                    <label for="file">Select file:</label>
                                    <input type="file" id="file" name="file" accept="image/*" required>
                                    <button type="submit">Send:</button>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
                
            </div>
        </div>
    </div>
</div>


<!-- Индикатор загрузки -->
<div id="loading-overlay" style="display: none;">
    <div class="loading-spinner">
        <img src="{% static 'loading.gif' %}" alt="Loading...">
        <p>Analyzing...</p>
    </div>
</div>

<style>
    /* Стиль для фона на весь экран */
    #loading-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.5); /* Полупрозрачный фон */
        display: flex;
        justify-content: center;
        align-items: center;
        z-index: 1000; /* Поверх всего контента */
    }

    /* Стиль для индикатора загрузки */
    .loading-spinner {
        text-align: center;
        color: white;
        font-size: 1.5em;
    }

    .loading-spinner img {
        width: 100px;
        height: 100px;
        margin-bottom: 20px;
    }
    button {
            padding: 10px 15px;
            font-size: 16px;
            font-weight: bold;
            color: #fff;
            background-color: #007bff;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s ease, transform 0.2s ease;
        }

        button:hover {
            background-color: #0056b3;
            transform: scale(1.05);
        }

        button:focus {
            outline: none;
            box-shadow: 0 0 5px rgba(0, 123, 255, 0.5);
        }
</style>

<script>
    // Функция для отображения индикатора загрузки
    function showLoading() {
        document.getElementById('loading-overlay').style.display = 'flex';
    }
</script>
    

{% endblock %}